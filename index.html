<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Seafoam E‑Card — Guided Demo with Styles & Alignment</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* ===== base + fixed header ===== */
    *{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif}
    html{scroll-behavior:smooth}
    body{background:#f0f4f4;color:#333;display:flex;flex-direction:column;min-height:100vh}
    header{
      position:fixed;top:0;left:0;width:100%;z-index:2000;
      display:flex;justify-content:space-between;align-items:center;
      padding:1rem 2rem;background:#A8E6CF;border-bottom:2px solid #82C9A1
    }
    header h1{font-size:1.5rem;font-weight:700;color:#155f46}
    .pill{background:#60A085;color:#fff;padding:.6rem 1.6rem;border:none;border-radius:9999px;font-weight:600;text-decoration:none}

    /* ===== main demos ===== */
    main{position:relative;flex:1;display:flex;flex-direction:column;gap:4rem;padding:calc(64px + 1rem) 0 3rem}
    .demo{width:100%;max-width:1200px;margin:0 auto;background:#fff;border-radius:16px;
          box-shadow:0 6px 18px rgba(0,0,0,.1);padding:1.5rem;display:flex;flex-direction:column;align-items:center}
    .demo h3{margin-bottom:1rem;font-size:1.1rem;font-weight:600;color:#155f46}
    iframe{width:100%;aspect-ratio:16/9;border:2px solid #ccc;border-radius:12px}

    /* fake browser */
    .browser{width:100%;aspect-ratio:16/9;border:2px solid #ccc;border-radius:12px;display:flex;flex-direction:column;overflow:hidden}
    .bar{position:relative;height:38px;background:#eaeaea;display:flex;align-items:center;padding:0 .8rem;font-size:.85rem;border-bottom:2px solid #ccc}
    .bar::before{content:'';width:10px;height:10px;border-radius:50%;background:#ff5f56;margin-right:.5rem}
    #urlTxt{word-break:break-all;white-space:normal;line-height:1.1em}

    /* pointer */
    #cur{position:fixed;left:0;top:0;width:26px;height:26px;border-radius:50%;background:#2a8c60;
         box-shadow:0 0 0 2px #fff,0 0 6px rgba(0,0,0,.25);
         transform:translate(-50%,-50%);transition:left .7s ease,top .7s ease,transform .13s ease;
         z-index:1000;pointer-events:none}
    .click{transform:translate(-50%,-50%) scale(.5)}
    .spark{position:absolute;width:8px;height:8px;border-radius:50%;background:#ffcc00;animation:spark 1s forwards}
    @keyframes spark{0%{transform:scale(0);opacity:1}80%{transform:scale(1.6);opacity:1}100%{transform:scale(0);opacity:0}}

    /* overlay */
    #replayCover{position:absolute;inset:0;background:rgba(0,0,0,.7);display:flex;justify-content:center;align-items:center;color:#fff;font-size:1.4rem;font-weight:600;gap:.6rem;opacity:0;pointer-events:none;transition:opacity .5s;z-index:1500}
    #replayCover.show{opacity:1;pointer-events:auto;cursor:pointer}
    #replayIcon{width:22px;height:22px;border:3px solid #fff;border-radius:50%;border-left-color:transparent;transform:rotate(45deg)}
  </style>
</head>
<body>

<header>
  <h1>Seafoam E‑Card</h1>
  <a class="pill" href="builder.html">Create E‑Card</a>
</header>

<main>
  <section class="demo" id="demoBuild">
    <h3>1 · Build (Styles & Alignment)</h3>
    <iframe id="frameBuild" src="builder.html"></iframe>
  </section>

  <section class="demo" id="demoShare">
    <h3>2 · Share & View</h3>
    <div class="browser">
      <div class="bar"><span id="urlTxt"></span></div>
      <iframe id="frameView"></iframe>
    </div>
  </section>

  <div id="replayCover"><div id="replayIcon"></div>Replay</div>
</main>

<div id="cur"></div>

<script>
const delay = ms => new Promise(r => setTimeout(r, ms));
const cur = document.getElementById('cur');
function gRect(el){
  let r=el.getBoundingClientRect(),w=el.ownerDocument.defaultView;
  while(w&&w!==window){
    const f=w.frameElement; if(!f) break;
    const fr=f.getBoundingClientRect();
    r={left:r.left+fr.left,top:r.top+fr.top,width:r.width,height:r.height};
    w=f.ownerDocument.defaultView;
  }
  return r;
}
async function move(el,extra=0){
  el.scrollIntoView({block:'center',behavior:'smooth'});
  await delay(800);
  const r=gRect(el);
  cur.style.left=r.left+r.width/2+'px';
  cur.style.top =r.top +r.height/2+'px';
  await delay(700+extra);
}
async function click(el){cur.classList.add('click');el&&el.click();await delay(130);cur.classList.remove('click');}

const sample = {
  to:'Sam', from:'Kim',
  lines:[
    {text:'You rock!', align:'left',    style:'bold'},
    {text:'Enjoy your day', align:'center', style:'italic'},
    {text:'Dream big',    align:'right',   style:'underline'},
    {text:'— The Team —',  align:'center', style:'bolditalic'}
  ],
  sticker:'https://picsum.photos/120'
};

async function buildCard(frame){
  const d = frame.contentWindow.document;
  if(!d.getElementById('toField')){await delay(200);return buildCard(frame);}
  const addBtn = d.getElementById('addLine'), ul=d.getElementById('lines');
  ul.innerHTML='';
  for(const cfg of sample.lines){
    await move(addBtn); await click(addBtn);
    const inp=ul.lastElementChild.querySelector('input');
    await move(inp);
    inp.focus();
    for(let i=1;i<=cfg.text.length;i++){
      inp.value=cfg.text.slice(0,i);
      inp.dispatchEvent(new Event('input',{bubbles:true}));
      await delay(30);
    }
    // alignment
    const alignBtn = d.getElementById(
      cfg.align==='center' ? 'alignCenterBtn' :
      cfg.align==='right'  ? 'alignRightBtn'  : 'alignLeftBtn'
    );
    await move(alignBtn,200); await click(alignBtn);
    // style
    if(cfg.style==='bold' || cfg.style==='bolditalic'){
      const bBtn=d.getElementById('boldBtn');
      await move(bBtn,200); await click(bBtn);
    }
    if(cfg.style==='italic' || cfg.style==='bolditalic'){
      const iBtn=d.getElementById('italicBtn');
      await move(iBtn,200); await click(iBtn);
    }
    if(cfg.style==='underline'){
      const uBtn=d.getElementById('underlineBtn');
      await move(uBtn,200); await click(uBtn);
    }
  }

  // To/From/URL/Generate
  const toF=d.getElementById('toField'),fromF=d.getElementById('fromField'),
        urlF=d.getElementById('stickerUrl'),gen=d.getElementById('generate');
  await move(toF); toF.value=sample.to; toF.dispatchEvent(new Event('input',{bubbles:true})); await click(null);
  await move(fromF); fromF.value=sample.from; fromF.dispatchEvent(new Event('input',{bubbles:true})); await click(null);
  await move(urlF); urlF.value=sample.sticker; urlF.dispatchEvent(new Event('input',{bubbles:true})); await click(null);
  await move(gen,200); await click(gen); await delay(450);
  const sp=document.createElement('div');sp.className='spark';
  const fr=gRect(frame);sp.style.left=fr.left+fr.width*0.8+'px';sp.style.top=fr.top+fr.height*0.2+'px';
  document.body.append(sp);setTimeout(()=>sp.remove(),1000);
  return d.getElementById('shareLink').textContent.trim();
}

async function shareCard(link){
  const txt=document.getElementById('urlTxt');txt.textContent='';
  const bar=txt.parentElement;
  await move(bar); await click(null);
  for(let i=1;i<=link.length;i++){ txt.textContent=link.slice(0,i); await delay(40); }
  await click(null);
  const view=document.getElementById('frameView'); view.src=link; await delay(800);
  const win=view.contentWindow, body=win.document.body;
  await move(view);
  win.scrollTo({top:0,behavior:'instant'}); await delay(400);
  win.scrollTo({top:body.scrollHeight,behavior:'smooth'}); await delay(4000);
  cur.style.opacity=0;
  window.scrollTo({top:0,behavior:'smooth'}); await delay(800);
  document.getElementById('replayCover').classList.add('show');
}

(async()=>{
  const link = await buildCard(document.getElementById('frameBuild'));
  await shareCard(link);
})();
document.getElementById('replayCover').onclick=()=>location.reload();
</script>
</body>
</html>
