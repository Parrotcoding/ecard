<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Seafoam E‑Card — Guided Demo</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* ===== base ===== */
    *{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif}
    html{scroll-behavior:smooth}
    body{background:#f0f4f4;display:flex;flex-direction:column;min-height:100vh;color:#333}

    /* ===== header ===== */
    header{display:flex;justify-content:space-between;align-items:center;padding:1rem 2rem;background:#A8E6CF;border-bottom:2px solid #82C9A1}
    header h1{font-size:1.5rem;font-weight:700;color:#155f46}
    .pill{background:#60A085;color:#fff;padding:.6rem 1.6rem;border:none;border-radius:9999px;font-weight:600;cursor:pointer;text-decoration:none}

    /* ===== demo layout ===== */
    main{flex:1;display:flex;flex-direction:column;gap:4rem;padding:2.5rem 0}
    .demo{width:100%;max-width:1200px;margin:0 auto;background:#fff;border-radius:16px;box-shadow:0 6px 18px rgba(0,0,0,.1);padding:1.5rem;display:flex;flex-direction:column;align-items:center;position:relative}
    .demo h3{margin-bottom:1rem;font-size:1.1rem;font-weight:600;color:#155f46}

    /* iframe containers */
    iframe{width:100%;aspect-ratio:16/9;border:2px solid #ccc;border-radius:12px}

    /* ----- fake browser for demo 2 ----- */
    .browser{width:100%;aspect-ratio:16/9;border:2px solid #ccc;border-radius:12px;display:flex;flex-direction:column;overflow:hidden}
    .bar{position:relative;height:38px;background:#eaeaea;display:flex;align-items:center;padding:0 .8rem;font-size:.85rem;border-bottom:2px solid #ccc}
    .bar::before{/* little circle indicator */content:'';width:10px;height:10px;border-radius:50%;background:#ff5f56;margin-right:.5rem}
    #urlProgress{position:absolute;left:0;top:0;height:100%;width:0;background:#c7f6d9;pointer-events:none}
    .pageFrame{flex:1;border:none;width:100%}

    /* ===== pointer ===== */
    #cursor{
      position:fixed;left:0;top:0;width:26px;height:26px;border-radius:50%;
      background:#2a8c60;box-shadow:0 0 0 2px #fff,0 0 6px rgba(0,0,0,.25);
      transform:translate(-50%,-50%);transition:left .7s ease,top .7s ease,transform .13s ease;
      z-index:10000;pointer-events:none
    }
    .click{transform:translate(-50%,-50%) scale(.5)}

    /* spark when “copying” */
    .spark{position:absolute;width:8px;height:8px;border-radius:50%;background:#ffcc00;animation:spark 1s forwards;pointer-events:none}
    @keyframes spark{0%{transform:scale(0);opacity:1}80%{transform:scale(1.6);opacity:1}100%{transform:scale(0);opacity:0}}
  </style>
</head>
<body>

  <!-- ===== header ===== -->
  <header>
    <h1>Seafoam E‑Card</h1>
    <a class="pill" href="builder.html">Create E‑Card</a>
  </header>

  <!-- ===== demos ===== -->
  <main>
    <!-- STEP 1 – BUILD -->
    <section class="demo" id="demoBuild">
      <h3>1 · Build</h3>
      <iframe id="frameBuild" src="builder.html"></iframe>
    </section>

    <!-- STEP 2 – SHARE / VIEW -->
    <section class="demo" id="demoShare">
      <h3>2 · Share & View</h3>
      <div class="browser">
        <div class="bar">
          <div id="urlProgress"></div>
          <span id="urlText"></span>
        </div>
        <iframe class="pageFrame" id="frameView"></iframe>
      </div>
    </section>
  </main>

  <!-- floating pointer -->
  <div id="cursor"></div>

  <!-- ===== script ===== -->
  <script>
  const delay = ms => new Promise(r=>setTimeout(r,ms));
  const cur   = document.getElementById('cursor');

  /* helpers to get coords across iframes */
  function gRect(el){
    let r = el.getBoundingClientRect(), w = el.ownerDocument.defaultView;
    while (w && w !== window){
      const f = w.frameElement; if(!f) break;
      const fr = f.getBoundingClientRect();
      r = {left:r.left+fr.left, top:r.top+fr.top, width:r.width, height:r.height};
      w = f.ownerDocument.defaultView;
    }
    return r;
  }
  async function pageScrollTo(el){
    el.scrollIntoView({block:'center',behavior:'smooth'}); await delay(800);
  }
  async function moveCur(el,extra=0){
    const r=gRect(el); cur.style.left=r.left+r.width/2+'px'; cur.style.top=r.top+r.height/2+'px';
    await delay(700+extra);
  }
  async function click(el){cur.classList.add('click'); await delay(130); cur.classList.remove('click'); el && el.click();}

  /* ----- sample data ----- */
  const sample = {to:'Sam',from:'Kim',lines:['You rock!','Enjoy your day','Dream big','— The Team —'],sticker:'https://picsum.photos/120'};

  /* ----- STEP 1 : build card ----- */
  async function buildCard(frame){
    await pageScrollTo(document.getElementById('demoBuild'));
    const w=frame.contentWindow,d=w.document;
    if(!d.getElementById('toField')){await delay(200);return buildCard(frame);} // wait load

    const add=d.getElementById('addLine'),ul=d.getElementById('lines');
    [...ul.children].forEach(li=>li.remove());
    for(const t of sample.lines){
      await moveCur(add); await click(add);
      const inp=ul.lastElementChild.querySelector('input');
      await moveCur(inp); inp.value=t; inp.dispatchEvent(new Event('input',{bubbles:true})); await click(null);
    }
    const toF=d.getElementById('toField'),fromF=d.getElementById('fromField');
    await moveCur(toF); toF.value=sample.to; toF.dispatchEvent(new Event('input',{bubbles:true})); await click(null);
    await moveCur(fromF); fromF.value=sample.from; fromF.dispatchEvent(new Event('input',{bubbles:true})); await click(null);
    const urlF=d.getElementById('stickerUrl');
    await moveCur(urlF); urlF.value=sample.sticker; urlF.dispatchEvent(new Event('input',{bubbles:true})); await click(null);
    const gen=d.getElementById('generate');
    await moveCur(gen,200); await click(gen); await delay(400);

    // “copy” link animation (spark only)
    const link=d.getElementById('shareLink').textContent.trim();
    const demoRect=gRect(frame);
    const sp=document.createElement('div');sp.className='spark';sp.style.left=demoRect.left+demoRect.width*0.8+'px';sp.style.top=demoRect.top+demoRect.height*0.2+'px';
    document.body.appendChild(sp); setTimeout(()=>sp.remove(),1000);
    return link;
  }

  /* ----- STEP 2 : simulate typing link & view card ----- */
  async function showCard(link){
    const section=document.getElementById('demoShare');
    await pageScrollTo(section);

    const bar   = document.getElementById('urlText');
    const prog  = document.getElementById('urlProgress');
    const viewF = document.getElementById('frameView');

    // reset bar
    bar.textContent=''; prog.style.width='0%';
    const barBox=bar.parentElement;

    await moveCur(barBox); await click(null);

    // “type” — grow progress bar & reveal text
    for(let i=1;i<=link.length;i++){
      bar.textContent=link.slice(0,i);
      prog.style.width=(i/link.length*100)+'%';
      await delay(40);
    }
    await click(null);    // click Go (visual only)
    viewF.src=link;       // load card
    await delay(800);

    // scroll inside card forever
    const win=viewF.contentWindow, body=win.document.body;
    for(;;){
      win.scrollTo({top:0,behavior:'instant'});
      await delay(300);
      await moveCur(viewF);
      win.scrollTo({top:body.scrollHeight,behavior:'smooth'});
      await delay(7500);
    }
  }

  (async()=>{
    const buildFrame=document.getElementById('frameBuild');
    const link = await buildCard(buildFrame);
    await showCard(link);
  })();
  </script>
</body>
</html>
